<!DOCTYPE html>
<html lang="ko" 
    xmlns:th="http://www.thymeleaf.org" 
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{layouts/default}">

	<section layout:fragment="contents d-flex justify-content-center" class="contents">
		<div class="post-box my-5">
			<h1>메모 입력</h1>
			<input type="text" class="form-control mt-4" placeholder="제목을 입력하세요.">
			<textarea class="form-control" rows="10" placeholder="내용을 입력하세요."></textarea>
			<input type="file">
			<div class="d-flex justify-content-between mt-3">
				<a href="/post/list-view" class="btn btn-secondary">목록으로</a>
				<button type="button" class="btn btn-secondary">저장</button>
			</div>
		</div>
	</section>
	
	<script layout:fragment = "script">
		$(document).ready(function(){
			$("#saveBtn").on("click", function(){
				let title = $("#titleInput").val();
				let contents = $("#contentsInput").val();
				
				if(title == ""){
					alert("제목을 입력하세요");
					return ;
				}
				
				if(contents == ""){
					alert("내용을 입력하세요")
					return ;
				}
				
				$.ajax({
					type:"post"
					, url : "/post/create"
					, data : {"title":title, "contents":contents}
					, success : function(data){
						if(data.result == "success"){
							location.href = "/post/list-view";
						}else{
							alert("메모 입력 실패");
						}
					}
					, error : function(){
						alert("메모 입력 에러")
					}
				})
				
			});
		});//문서 준비 끝
	</script>
	
</html>